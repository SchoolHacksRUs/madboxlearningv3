<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluxus</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: #000; color: #fff; overflow-x: hidden; }
        .loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; align-items: center; justify-content: center; z-index: 9999; transition: opacity 0.5s ease; }
        .loading-screen.hidden { opacity: 0; pointer-events: none; }
        .loading-logo { font-size: 72px; font-weight: 900; letter-spacing: -2px; color: #fff; animation: pulse 1.5s ease-in-out infinite; text-shadow: 0 0 40px rgba(255,255,255,0.3); }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } }
        .profile-screen { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; transition: opacity 0.5s ease; }
        .profile-screen.hidden { display: none; }
        .profile-header { text-align: center; margin-bottom: 60px; }
        .profile-logo { font-size: 48px; font-weight: 900; letter-spacing: -1px; color: #fff; margin-bottom: 20px; text-shadow: 0 0 30px rgba(255,255,255,0.3); }
        .profile-title { font-size: 48px; font-weight: 400; margin-bottom: 10px; }
        .profiles-container { display: flex; gap: 40px; flex-wrap: wrap; justify-content: center; max-width: 800px; }
        .profile-card { cursor: pointer; transition: transform 0.3s ease; }
        .profile-card:hover { transform: scale(1.1); }
        .profile-avatar { width: 200px; height: 200px; border-radius: 12px; background: #fff; color: #000; display: flex; align-items: center; justify-content: center; font-size: 64px; margin-bottom: 20px; border: 4px solid transparent; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 30px rgba(255,255,255,0.2); position: relative; overflow: visible; }
        .letter-f { font-size: 120px; font-weight: 900; color: #000; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: center; }
        .profile-card:hover .profile-avatar { border-color: #fff; box-shadow: 0 0 60px rgba(255,255,255,0.5); transform: translateY(-10px); }
        .profile-card:hover .letter-f { transform: scale(1.1); }
        .profile-screen.animating { pointer-events: none; }
        .profile-screen.animating::before { content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; z-index: -1; animation: fadeBackground 1.2s ease forwards; }
        .profile-header.fade-header { animation: fadeOut 0.6s ease forwards; }
        .profile-name.fade-name { animation: fadeOut 0.6s ease forwards; }
        @keyframes fadeOut { to { opacity: 0; } }
        @keyframes fadeBackground { 0% { opacity: 0; } 40% { opacity: 1; } 100% { opacity: 1; } }
        .profile-avatar.zoom-animation { animation: zoomProfile 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards; z-index: 9999; }
        .letter-f.grow-animation { animation: growF 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes zoomProfile { 0% { transform: translateY(-10px) scale(1); border-radius: 12px; } 50% { transform: translateY(-10px) scale(1.2); border-radius: 12px; } 70% { transform: translateY(-10px) scale(5); border-radius: 50%; } 100% { transform: translateY(-10px) scale(50); border-radius: 50%; opacity: 0; } }
        @keyframes growF { 0% { transform: scale(1.1); opacity: 1; } 30% { transform: scale(1.5); opacity: 1; } 60% { transform: scale(8); opacity: 0.9; } 100% { transform: scale(40); opacity: 0; } }
        .profile-screen.fade-out { animation: fadeOutScreen 0.3s ease forwards; animation-delay: 1.1s; }
        @keyframes fadeOutScreen { to { opacity: 0; } }
        .profile-name { text-align: center; font-size: 18px; color: #808080; transition: color 0.3s ease; }
        .profile-card:hover .profile-name { color: #fff; }
        .main-app { display: none; min-height: 100vh; opacity: 0; }
        .main-app.active { display: block; animation: fadeInApp 0.8s ease forwards; }
        @keyframes fadeInApp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .navbar { position: fixed; top: 0; width: 100%; padding: 20px 60px; background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, transparent 100%); display: flex; align-items: center; justify-content: space-between; z-index: 100; transition: background 0.3s ease; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .navbar.scrolled { background: #000; border-bottom: 1px solid rgba(255,255,255,0.2); }
        .nav-logo { font-size: 32px; font-weight: 900; letter-spacing: -1px; color: #fff; cursor: pointer; text-shadow: 0 0 20px rgba(255,255,255,0.3); }
        .nav-right { display: flex; align-items: center; gap: 20px; }
        .html-viewer-btn { padding: 10px 18px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; color: rgba(255,255,255,0.8); font-size: 12px; font-weight: 700; letter-spacing: 1.5px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; position: relative; overflow: hidden; font-family: 'Courier New', monospace; }
        .html-viewer-btn .hvb-icon { display: flex; align-items: center; color: #00ff88; transition: transform 0.3s ease; }
        .html-viewer-btn:hover { background: rgba(0,255,136,0.08); border-color: rgba(0,255,136,0.4); color: #fff; box-shadow: 0 0 20px rgba(0,255,136,0.15); transform: translateY(-1px); }
        .html-viewer-btn:hover .hvb-icon { transform: rotate(10deg) scale(1.1); }
        .html-viewer-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.92); backdrop-filter: blur(8px); z-index: 2000; display: flex; align-items: center; justify-content: center; opacity: 0; animation: hvFadeIn 0.25s ease forwards; }
        @keyframes hvFadeIn { to { opacity: 1; } }
        .html-viewer-modal.closing { animation: hvFadeOut 0.25s ease forwards; }
        @keyframes hvFadeOut { to { opacity: 0; } }
        .hv-container { width: 95vw; height: 90vh; max-width: 1600px; background: #0a0a0a; border: 1px solid rgba(255,255,255,0.12); border-radius: 16px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 40px 120px rgba(0,0,0,0.8), 0 0 0 1px rgba(255,255,255,0.05); transform: scale(0.94) translateY(16px); animation: hvSlideUp 0.35s cubic-bezier(0.34, 1.4, 0.64, 1) forwards; }
        .html-viewer-modal.closing .hv-container { animation: hvSlideDown 0.25s ease forwards; }
        @keyframes hvSlideUp { to { transform: scale(1) translateY(0); } }
        @keyframes hvSlideDown { to { transform: scale(0.94) translateY(16px); opacity: 0; } }
        .hv-titlebar { display: flex; align-items: center; padding: 0 20px; height: 52px; background: #0d0d0d; border-bottom: 1px solid rgba(255,255,255,0.08); gap: 16px; flex-shrink: 0; }
        .hv-traffic-lights { display: flex; gap: 7px; }
        .hv-dot { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; transition: filter 0.2s; }
        .hv-dot.close { background: #ff5f57; }
        .hv-dot.min { background: #febc2e; }
        .hv-dot.max { background: #28c840; }
        .hv-dot:hover { filter: brightness(1.2); }
        .hv-title { font-family: 'Courier New', monospace; font-size: 13px; font-weight: 700; letter-spacing: 2px; color: rgba(255,255,255,0.5); flex: 1; text-align: center; }
        .hv-title span { color: #00ff88; }
        .hv-actions { display: flex; gap: 8px; }
        .hv-btn { padding: 6px 14px; border-radius: 6px; font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.2s ease; letter-spacing: 0.5px; font-family: 'Courier New', monospace; border: 1px solid transparent; }
        .hv-btn-run { background: #00ff88; color: #000; border-color: #00ff88; }
        .hv-btn-run:hover { background: #00e67a; box-shadow: 0 0 16px rgba(0,255,136,0.4); transform: translateY(-1px); }
        .hv-btn-clear { background: transparent; color: rgba(255,255,255,0.5); border-color: rgba(255,255,255,0.1); }
        .hv-btn-clear:hover { border-color: rgba(255,255,255,0.3); color: #fff; }
        .hv-btn-fullscreen { background: transparent; color: rgba(255,255,255,0.5); border-color: rgba(255,255,255,0.1); display: flex; align-items: center; gap: 5px; }
        .hv-btn-fullscreen:hover { border-color: rgba(255,255,255,0.3); color: #fff; }
        .hv-body { display: flex; flex: 1; overflow: hidden; }
        .hv-editor-pane { width: 45%; display: flex; flex-direction: column; border-right: 1px solid rgba(255,255,255,0.08); min-width: 0; }
        .hv-pane-header { padding: 10px 18px; background: #0d0d0d; border-bottom: 1px solid rgba(255,255,255,0.06); font-family: 'Courier New', monospace; font-size: 11px; letter-spacing: 1.5px; color: rgba(255,255,255,0.3); display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
        .hv-pane-dot { width: 6px; height: 6px; border-radius: 50%; background: #00ff88; }
        .hv-editor-wrap { flex: 1; position: relative; overflow: hidden; }
        .hv-line-numbers { position: absolute; left: 0; top: 0; bottom: 0; width: 44px; background: #0d0d0d; border-right: 1px solid rgba(255,255,255,0.05); padding: 16px 0; overflow: hidden; pointer-events: none; z-index: 1; }
        .hv-line-num { display: block; text-align: right; padding-right: 10px; font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.6em; color: rgba(255,255,255,0.18); height: 1.6em; }
        .hv-code-editor { position: absolute; inset: 0; padding: 16px 16px 16px 60px; background: transparent; color: #e0e0e0; font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.6em; resize: none; outline: none; border: none; caret-color: #00ff88; tab-size: 2; white-space: pre; overflow: auto; scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.15) transparent; }
        .hv-code-editor::selection { background: rgba(0,255,136,0.2); }
        .hv-code-editor::-webkit-scrollbar { width: 6px; height: 6px; }
        .hv-code-editor::-webkit-scrollbar-track { background: transparent; }
        .hv-code-editor::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 3px; }
        .hv-resize-handle { width: 4px; background: rgba(255,255,255,0.05); cursor: col-resize; flex-shrink: 0; transition: background 0.2s; }
        .hv-resize-handle:hover, .hv-resize-handle.dragging { background: rgba(0,255,136,0.3); }
        .hv-preview-pane { flex: 1; display: flex; flex-direction: column; min-width: 0; }
        .hv-preview-frame { flex: 1; border: none; background: #fff; }
        .hv-empty-state { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 16px; color: rgba(255,255,255,0.2); font-family: 'Courier New', monospace; font-size: 13px; }
        .hv-empty-icon { font-size: 40px; opacity: 0.3; }
        .hv-statusbar { height: 28px; background: #0d0d0d; border-top: 1px solid rgba(255,255,255,0.06); display: flex; align-items: center; padding: 0 18px; gap: 20px; flex-shrink: 0; }
        .hv-status-item { font-family: 'Courier New', monospace; font-size: 11px; color: rgba(255,255,255,0.25); display: flex; align-items: center; gap: 5px; }
        .hv-status-item.green { color: #00ff88; }
        .hv-fullscreen-overlay { position: fixed; inset: 0; z-index: 9999; background: #000; display: flex; flex-direction: column; }
        .hv-fs-bar { height: 44px; background: rgba(0,0,0,0.95); border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; padding: 0 20px; gap: 12px; }
        .hv-fs-title { font-family: 'Courier New', monospace; font-size: 12px; letter-spacing: 2px; color: rgba(255,255,255,0.4); flex: 1; }
        .hv-fs-exit { padding: 6px 14px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); border-radius: 6px; color: #fff; font-size: 12px; font-family: 'Courier New', monospace; letter-spacing: 1px; cursor: pointer; transition: all 0.2s; }
        .hv-fs-exit:hover { background: rgba(255,255,255,0.14); border-color: rgba(255,255,255,0.3); }
        .hv-fs-frame { flex: 1; border: none; background: #fff; }
        .changelog-btn { padding: 10px 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #fff; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .changelog-btn::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent); transform: rotate(45deg); animation: shine 3s ease-in-out infinite; }
        @keyframes shine { 0% { left: -50%; } 50%, 100% { left: 150%; } }
        .changelog-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255,255,255,0.2); }
        .changelog-btn .badge { display: inline-block; width: 8px; height: 8px; background: #00ff88; border-radius: 50%; margin-left: 8px; animation: pulse-dot 2s ease-in-out infinite; }
        @keyframes pulse-dot { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.2); } }
        .changelog-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; z-index: 1001; opacity: 0; animation: fadeInModal 0.3s ease forwards; }
        .changelog-modal.closing { animation: fadeOutModal 0.3s ease forwards; }
        .changelog-content { background: #000; padding: 40px; border-radius: 16px; width: 90%; max-width: 600px; max-height: 80vh; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 20px 60px rgba(0,0,0,0.5); transform: scale(0.9) translateY(20px); animation: slideUpScale 0.4s cubic-bezier(0.4,0,0.2,1) forwards; display: flex; flex-direction: column; }
        .changelog-modal.closing .changelog-content { animation: slideDownScale 0.3s cubic-bezier(0.4,0,0.2,1) forwards; }
        .changelog-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .changelog-title { font-size: 28px; font-weight: 700; color: #fff; }
        .changelog-close { width: 36px; height: 36px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: rgba(255,255,255,0.6); font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
        .changelog-close:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3); color: #fff; }
        .changelog-list { overflow-y: auto; flex: 1; padding-right: 10px; }
        .changelog-list::-webkit-scrollbar { width: 6px; }
        .changelog-list::-webkit-scrollbar-track { background: transparent; }
        .changelog-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }
        .changelog-list::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }
        .changelog-entry { margin-bottom: 24px; padding: 20px; background: rgba(255,255,255,0.03); border-left: 3px solid rgba(255,255,255,0.2); border-radius: 8px; transition: all 0.3s ease; }
        .changelog-entry:hover { background: rgba(255,255,255,0.05); border-left-color: #fff; transform: translateX(4px); }
        .changelog-entry.new { border-left-color: #00ff88; background: rgba(0,255,136,0.05); }
        .changelog-date { font-size: 12px; color: #00ff88; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .changelog-items { display: flex; flex-direction: column; gap: 6px; }
        .changelog-item { font-size: 14px; color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px; position: relative; }
        .changelog-item::before { content: '\2022'; position: absolute; left: 8px; color: rgba(255,255,255,0.4); }
        .changelog-item.added::before { content: '+'; color: #00ff88; }
        .changelog-item.fixed::before { content: '\2713'; color: #00aaff; }
        .changelog-item.removed::before { content: '-'; color: #ff4444; }
        .search-box { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 4px; color: #fff; font-size: 14px; width: 250px; outline: none; transition: all 0.3s ease; }
        .search-box:focus { background: rgba(255,255,255,0.15); border-color: #fff; }
        .profile-icon { width: 40px; height: 40px; border-radius: 6px; background: #fff; color: #000; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 20px; font-weight: 900; transition: all 0.3s ease; }
        .profile-icon:hover { box-shadow: 0 0 20px rgba(255,255,255,0.5); transform: scale(1.05); }
        body.flashing::before { content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%); z-index: 10000; animation: flashEffect 0.6s ease-out forwards; pointer-events: none; }
        @keyframes flashEffect { 0% { opacity: 0; } 20% { opacity: 1; } 100% { opacity: 0; } }
        .content { padding-top: 100px; }
        .hero { position: relative; height: 85vh; background: #000; display: flex; align-items: center; padding: 0 60px; margin-bottom: 0; overflow: hidden; }
        .hero-background { position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0; transition: opacity 1.5s cubic-bezier(0.4,0,0.2,1); }
        .hero-background.active { opacity: 1; }
        .hero-background img { width: 100%; height: 100%; object-fit: cover; filter: brightness(1.1) contrast(1.1); transform: scale(1.15); animation: slowZoom 20s ease-in-out infinite alternate; }
        @keyframes slowZoom { 0% { transform: scale(1.15) translateX(0); } 100% { transform: scale(1.25) translateX(-5%); } }
        .hero::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to right, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.3) 40%, rgba(0,0,0,0.7) 100%), linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 60%, rgba(0,0,0,0.95) 90%, rgba(0,0,0,1) 100%); pointer-events: none; }
        .hero-content { max-width: 650px; position: relative; z-index: 2; }
        .hero-badge { display: inline-block; padding: 8px 16px; background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3); border-radius: 30px; font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 20px; opacity: 0; transform: translateY(20px); transition: all 0.8s cubic-bezier(0.4,0,0.2,1); }
        .hero-badge.visible { opacity: 1; transform: translateY(0); }
        .hero-title { font-size: 72px; font-weight: 800; margin-bottom: 20px; line-height: 1.1; letter-spacing: -2px; opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.4,0,0.2,1) 0.1s; text-shadow: 0 4px 20px rgba(0,0,0,0.8); }
        .hero-title.visible { opacity: 1; transform: translateY(0); }
        .hero-description { font-size: 20px; line-height: 1.6; color: #e5e5e5; margin-bottom: 35px; opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.4,0,0.2,1) 0.2s; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        .hero-description.visible { opacity: 1; transform: translateY(0); }
        .hero-buttons { display: flex; gap: 16px; opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.4,0,0.2,1) 0.3s; }
        .hero-buttons.visible { opacity: 1; transform: translateY(0); }
        .btn { padding: 16px 40px; border: none; border-radius: 6px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-primary { background: #fff; color: #000; box-shadow: 0 4px 20px rgba(255,255,255,0.3); }
        .btn-primary:hover { background: rgba(255,255,255,0.9); transform: translateY(-2px); box-shadow: 0 6px 30px rgba(255,255,255,0.4); }
        .btn-secondary { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3); color: #fff; }
        .btn-secondary:hover { background: rgba(255,255,255,0.25); transform: translateY(-2px); }
        .version-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; z-index: 1001; opacity: 0; animation: fadeInModal 0.3s ease forwards; }
        .version-modal.closing { animation: fadeOutModal 0.3s ease forwards; }
        @keyframes fadeInModal { to { opacity: 1; } }
        @keyframes fadeOutModal { to { opacity: 0; } }
        .version-content { background: #000; padding: 40px; border-radius: 16px; width: 90%; max-width: 500px; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 20px 60px rgba(0,0,0,0.5); transform: scale(0.9) translateY(20px); animation: slideUpScale 0.4s cubic-bezier(0.4,0,0.2,1) forwards; }
        .version-modal.closing .version-content { animation: slideDownScale 0.3s cubic-bezier(0.4,0,0.2,1) forwards; }
        @keyframes slideUpScale { to { transform: scale(1) translateY(0); } }
        @keyframes slideDownScale { to { transform: scale(0.9) translateY(20px); opacity: 0; } }
        .version-header { font-size: 28px; font-weight: 700; margin-bottom: 10px; color: #fff; display: flex; align-items: center; gap: 12px; }
        .version-subtitle { font-size: 14px; color: rgba(255,255,255,0.6); margin-bottom: 30px; }
        .version-grid { display: grid; gap: 12px; max-height: 400px; overflow-y: auto; margin-bottom: 24px; }
        .version-option { padding: 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer; transition: all 0.4s cubic-bezier(0.4,0,0.2,1); position: relative; overflow: hidden; }
        .version-option::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); transition: left 0.5s ease; }
        .version-option:hover::before { left: 100%; }
        .version-option:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.4); transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 24px rgba(0,0,0,0.3); }
        .version-option:active { transform: translateY(-2px) scale(0.98); transition: all 0.15s cubic-bezier(0.4,0,0.2,1); }
        .version-name { font-size: 18px; font-weight: 600; color: #fff; margin-bottom: 6px; }
        .version-description { font-size: 13px; color: rgba(255,255,255,0.6); }
        .version-close { width: 100%; padding: 14px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .version-close:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); }
        .version-grid::-webkit-scrollbar { width: 6px; }
        .version-grid::-webkit-scrollbar-track { background: transparent; }
        .version-grid::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }
        .version-grid::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }
        .game-section { padding: 60px 60px 80px; background: #000; display: flex; gap: 40px; position: relative; overflow: hidden; }
        .category-sidebar { flex: 0 0 240px; position: sticky; top: 120px; height: fit-content; z-index: 1; }
        .sidebar-title { font-size: 24px; font-weight: 700; margin-bottom: 20px; color: #fff; }
        .category-list { display: flex; flex-direction: column; gap: 8px; }
        .category-item { padding: 14px 18px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; transition: all 0.3s ease; font-size: 14px; font-weight: 500; display: flex; align-items: center; justify-content: space-between; }
        .category-item:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.3); color: #fff; transform: translateX(4px); }
        .category-item.active { background: rgba(255,255,255,0.12); border-color: #fff; color: #fff; }
        .category-count { font-size: 12px; color: rgba(255,255,255,0.4); background: rgba(255,255,255,0.05); padding: 2px 8px; border-radius: 12px; }
        .category-item.active .category-count { color: rgba(255,255,255,0.7); background: rgba(255,255,255,0.1); }
        .games-content { flex: 1; min-width: 0; position: relative; z-index: 1; }
        .section-header { margin-bottom: 30px; }
        .section-title { font-size: 32px; font-weight: 700; margin-bottom: 10px; color: #fff; }
        .section-subtitle { font-size: 16px; color: rgba(255,255,255,0.6); }
        .bento-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; grid-auto-rows: 10px; }
        .bento-item { background: #111; border-radius: 8px; overflow: hidden; cursor: pointer; position: relative; border: 1px solid rgba(255,255,255,0.1); transition: all 0.6s cubic-bezier(0.34,1.56,0.64,1); opacity: 1; transform: scale(1); grid-column: span 1; }
        .bento-item:hover { transform: translateY(-8px) scale(1); border-color: rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(255,255,255,0.15); z-index: 10; }
        .bento-item.fade-out { opacity: 0; transform: scale(0.8); pointer-events: none; }
        .bento-item.transitioning { transition: all 0.7s cubic-bezier(0.34,1.56,0.64,1); }
        .bento-image { width: 100%; height: auto; display: block; transition: transform 0.4s ease; }
        .bento-item:hover .bento-image { transform: scale(1.05); }
        .bento-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 20px; background: linear-gradient(to top, rgba(0,0,0,0.98) 0%, rgba(0,0,0,0.85) 70%, transparent 100%); transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.4,0,0.2,1); }
        .bento-item:hover .bento-overlay { transform: translateY(0); }
        .bento-title { font-size: 16px; font-weight: 600; margin-bottom: 8px; color: #fff; }
        .bento-tag { display: inline-block; font-size: 10px; padding: 5px 12px; background: #fff; color: #000; border-radius: 4px; text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px; }
        .comments-section { padding: 80px 60px; background: linear-gradient(180deg, #000 0%, #0a0a0a 100%); border-top: 1px solid rgba(255,255,255,0.1); }
        .comments-header { text-align: center; margin-bottom: 50px; }
        .comments-title { font-size: 48px; font-weight: 700; margin-bottom: 15px; color: #fff; letter-spacing: -1px; }
        .comments-subtitle { font-size: 18px; color: rgba(255,255,255,0.6); line-height: 1.6; }
        .comments-container { max-width: 1400px; margin: 0 auto; display: flex; gap: 30px; align-items: start; }
        .reviews-column { flex: 0 0 280px; display: flex; flex-direction: column; gap: 20px; }
        .review-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; transition: all 0.3s ease; }
        .review-card:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); transform: translateY(-2px); }
        .review-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .review-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 16px; color: #fff; }
        .review-avatar.alt1 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .review-avatar.alt2 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .review-avatar.alt3 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .review-avatar.alt4 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .review-avatar.alt5 { background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); }
        .review-info { flex: 1; }
        .review-name { font-size: 14px; font-weight: 600; color: #fff; margin-bottom: 2px; }
        .review-stars { color: #ffd700; font-size: 12px; letter-spacing: 2px; }
        .review-text { font-size: 13px; line-height: 1.6; color: rgba(255,255,255,0.7); }
        .review-text.featured { color: rgba(255,255,255,0.85); font-weight: 500; }
        .review-date { font-size: 11px; color: rgba(255,255,255,0.4); margin-top: 8px; }
        .padlet-wrapper { flex: 1; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); transition: all 0.3s ease; }
        .padlet-wrapper:hover { border-color: rgba(255,255,255,0.2); box-shadow: 0 15px 50px rgba(0,0,0,0.4); }
        .padlet-embed { border: none !important; border-radius: 12px !important; overflow: hidden !important; background: #1a1a1a !important; }
        .padlet-embed iframe { border-radius: 12px !important; }
        .padlet-embed > div:last-child { display: none !important; }
        .footer { padding: 60px; color: rgba(255,255,255,0.5); text-align: center; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 40px; }
        .footer-logo { font-size: 24px; font-weight: 900; color: #fff; margin-bottom: 10px; text-shadow: 0 0 20px rgba(255,255,255,0.2); }

        /* ============================================
           FLUXUS GAME PLAYER OVERLAY
           ============================================ */
        .game-player-overlay {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 5000;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: scale(0.97);
            animation: gamePlayerIn 0.35s cubic-bezier(0.34, 1.2, 0.64, 1) forwards;
        }
        @keyframes gamePlayerIn {
            to { opacity: 1; transform: scale(1); }
        }
        .game-player-overlay.closing {
            animation: gamePlayerOut 0.25s ease forwards;
        }
        @keyframes gamePlayerOut {
            to { opacity: 0; transform: scale(0.97); }
        }

        /* Top bar */
        .gp-bar {
            height: 52px;
            background: #0a0a0a;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 0;
            flex-shrink: 0;
            position: relative;
        }

        /* Left: logo + title */
        .gp-left {
            display: flex;
            align-items: center;
            gap: 14px;
            flex: 1;
            min-width: 0;
        }
        .gp-logo-mark {
            width: 28px;
            height: 28px;
            background: #fff;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 900;
            color: #000;
            flex-shrink: 0;
            letter-spacing: -0.5px;
        }
        .gp-divider {
            width: 1px;
            height: 20px;
            background: rgba(255,255,255,0.12);
            flex-shrink: 0;
        }
        .gp-game-title {
            font-size: 14px;
            font-weight: 700;
            color: #fff;
            letter-spacing: 0.3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Center: loading indicator */
        .gp-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .gp-loading-ring {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.1);
            border-top-color: rgba(255,255,255,0.5);
            border-radius: 50%;
            animation: gpSpin 0.8s linear infinite;
            transition: opacity 0.4s ease;
        }
        .gp-loading-ring.hidden { opacity: 0; }
        @keyframes gpSpin { to { transform: rotate(360deg); } }

        /* Right: action buttons */
        .gp-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .gp-btn {
            height: 32px;
            padding: 0 14px;
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 6px;
            color: rgba(255,255,255,0.75);
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .gp-btn svg {
            flex-shrink: 0;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .gp-btn:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.25);
            color: #fff;
            transform: translateY(-1px);
        }
        .gp-btn:hover svg { opacity: 1; }
        .gp-btn:active { transform: translateY(0); }

        /* Refresh button — subtle green tint on hover */
        .gp-btn-refresh:hover {
            background: rgba(0,255,136,0.07);
            border-color: rgba(0,255,136,0.3);
            color: #00ff88;
        }
        .gp-btn-refresh:hover svg { color: #00ff88; }

        /* Fullscreen button */
        .gp-btn-fullscreen:hover {
            background: rgba(255,255,255,0.08);
            border-color: rgba(255,255,255,0.3);
        }

        /* Save button — amber tint */
        .gp-btn-save { background: rgba(255,200,50,0.06); border-color: rgba(255,200,50,0.2); color: rgba(255,220,120,0.85); }
        .gp-btn-save:hover { background: rgba(255,200,50,0.12); border-color: rgba(255,200,50,0.45); color: #ffd060; transform: translateY(-1px); }
        .gp-btn-save:disabled { opacity: 0.4; pointer-events: none; }

        /* Load save button — blue tint */
        .gp-btn-load { background: rgba(80,160,255,0.06); border-color: rgba(80,160,255,0.2); color: rgba(140,190,255,0.85); }
        .gp-btn-load:hover { background: rgba(80,160,255,0.12); border-color: rgba(80,160,255,0.45); color: #7bb8ff; transform: translateY(-1px); }

        /* Toast */
        .gp-toast { position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(16px); background: #111; border: 1px solid rgba(255,255,255,0.12); border-radius: 10px; padding: 11px 18px; display: flex; align-items: center; gap: 9px; font-size: 13px; font-weight: 600; color: #fff; z-index: 9999; opacity: 0; transition: all 0.3s cubic-bezier(0.34,1.4,0.64,1); pointer-events: none; white-space: nowrap; box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
        .gp-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .gp-toast.success { border-color: rgba(0,255,136,0.35); }
        .gp-toast.error   { border-color: rgba(255,80,80,0.35); }
        .gp-toast.info    { border-color: rgba(80,160,255,0.35); }
        .gp-toast-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
        .gp-toast.success .gp-toast-dot { background: #00ff88; }
        .gp-toast.error   .gp-toast-dot { background: #ff5555; }
        .gp-toast.info    .gp-toast-dot { background: #5aa0ff; }

        /* Exit button — red tint */
        .gp-btn-exit {
            background: rgba(255,80,80,0.06);
            border-color: rgba(255,80,80,0.2);
            color: rgba(255,140,140,0.85);
        }
        .gp-btn-exit:hover {
            background: rgba(255,60,60,0.15);
            border-color: rgba(255,80,80,0.5);
            color: #ff6b6b;
            transform: translateY(-1px);
        }

        /* The game iframe */
        .gp-frame-wrap {
            flex: 1;
            position: relative;
            background: #000;
        }
        .gp-iframe {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        /* Subtle scanline texture on the bar for extra polish */
        .gp-bar::after {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(255,255,255,0.01) 2px,
                rgba(255,255,255,0.01) 4px
            );
            pointer-events: none;
        }

        @media (max-width: 768px) {
            .navbar { padding: 20px 20px; }
            .hero { height: 70vh; padding: 0 20px; }
            .hero-title { font-size: 48px; }
            .hero-description { font-size: 16px; }
            .game-section { padding: 40px 20px; }
            .comments-section { padding: 60px 20px; }
            .padlet-wrapper { padding: 20px; }
            .bento-grid { grid-template-columns: repeat(2, 1fr); }
            .profiles-container { gap: 20px; }
            .profile-avatar { width: 120px; height: 120px; font-size: 48px; }
            .gp-btn span { display: none; }
            .gp-btn { padding: 0 10px; }
        }
        @media (max-width: 1600px) { .bento-grid { grid-template-columns: repeat(4, 1fr); } }
        @media (max-width: 1200px) { .bento-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 992px) { .game-section { flex-direction: column; } .category-sidebar { position: relative; top: 0; flex: 1; width: 100%; } .category-list { flex-direction: row; flex-wrap: wrap; gap: 10px; } .category-item { flex: 0 0 auto; } .bento-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 480px) { .bento-grid { grid-template-columns: repeat(1, 1fr); } .hero-buttons { flex-direction: column; } .btn { width: 100%; justify-content: center; } .comments-title { font-size: 32px; } .comments-container { flex-direction: column; } .reviews-column { flex: 1; width: 100%; } }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">FLUXUS</div>
    </div>
    <div class="profile-screen" id="profileScreen">
        <div class="profile-header">
            <div class="profile-logo">FLUXUS</div>
            <h1 class="profile-title">Ready to play?</h1>
        </div>
        <div class="profiles-container">
            <div class="profile-card" id="fluxusProfile">
                <div class="profile-avatar"><div class="letter-f">F</div></div>
                <div class="profile-name">Fluxus Games</div>
            </div>
        </div>
    </div>
    <div class="main-app" id="mainApp">
        <nav class="navbar" id="navbar">
            <div class="nav-logo">FLUXUS</div>
            <div class="nav-right">
                <input type="text" class="search-box" id="searchBox" placeholder="Search games...">
                <button class="html-viewer-btn" id="htmlViewerBtn">
                    <span class="hvb-icon">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <polyline points="16 18 22 12 16 6"></polyline>
                            <polyline points="8 6 2 12 8 18"></polyline>
                        </svg>
                    </span>
                    HTML VIEWER
                </button>
                <button class="changelog-btn" id="changelogBtn">What's New<span class="badge"></span></button>
                <div class="profile-icon" id="profileIcon" style="font-size:20px;font-weight:900;">F</div>
            </div>
        </nav>
        <div class="content">
            <div class="hero">
                <div class="hero-background active" id="heroBackground">
                    <img id="heroImage" src="" alt="Featured Game">
                </div>
                <div class="hero-content">
                    <div class="hero-badge visible" id="heroBadge">Featured Game</div>
                    <h1 class="hero-title visible" id="heroTitle">Unblocked Gaming</h1>
                    <p class="hero-description visible" id="heroDescription">Play the best collection of unblocked games. From classics to new releases, all accessible anywhere, anytime.</p>
                    <div class="hero-buttons visible">
                        <button class="btn btn-primary" id="playFeatured">&#9654; Play Now</button>
                        <button class="btn btn-secondary">&#9432; More Info</button>
                    </div>
                </div>
            </div>
            <div class="game-section">
                <div class="category-sidebar">
                    <h3 class="sidebar-title">Categories</h3>
                    <div class="category-list">
                        <div class="category-item active" data-category="all"><span>All Games</span><span class="category-count" id="count-all">0</span></div>
                        <div class="category-item" data-category="featured"><span>Featured</span><span class="category-count" id="count-featured">0</span></div>
                        <div class="category-item" data-category="action"><span>Action</span><span class="category-count" id="count-action">0</span></div>
                        <div class="category-item" data-category="horror"><span>Horror</span><span class="category-count" id="count-horror">0</span></div>
                        <div class="category-item" data-category="sandbox"><span>Sandbox</span><span class="category-count" id="count-sandbox">0</span></div>
                        <div class="category-item" data-category="classic"><span>Classic</span><span class="category-count" id="count-classic">0</span></div>
                    </div>
                </div>
                <div class="games-content">
                    <div class="section-header">
                        <h2 class="section-title">Browse Games</h2>
                        <p class="section-subtitle">Discover your next favorite game from our curated collection</p>
                    </div>
                    <div class="bento-grid" id="allGamesGrid"></div>
                </div>
            </div>
            <div class="comments-section">
                <div class="comments-header">
                    <h2 class="comments-title">Join the Community</h2>
                    <p class="comments-subtitle">Share your thoughts, suggest games, or just hang out with fellow gamers</p>
                </div>
                <div class="comments-container">
                    <div class="reviews-column">
                        <div class="review-card"><div class="review-header"><div class="review-avatar">M</div><div class="review-info"><div class="review-name">Marcus Chen</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text featured">Finally found a site that actually cares about quality. The owner/developer really makes sure he only adds higher quality games compared to the slop on other sites which add whatever they can. This guy takes pride in keeping the site clean and sleek.</p><div class="review-date">2 days ago</div></div>
                        <div class="review-card"><div class="review-header"><div class="review-avatar alt1">S</div><div class="review-info"><div class="review-name">Sarah J.</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text">Best unblocked gaming site I've used. Clean interface, no ads everywhere, just pure gaming. The Minecraft version runs so smooth!</p><div class="review-date">5 days ago</div></div>
                        <div class="review-card"><div class="review-header"><div class="review-avatar alt2">J</div><div class="review-info"><div class="review-name">Jake Morrison</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text">The secret games feature is genius. Found some absolute gems I never would have discovered otherwise. 10/10 site design too.</p><div class="review-date">1 week ago</div></div>
                        <div class="review-card"><div class="review-header"><div class="review-avatar alt3">A</div><div class="review-info"><div class="review-name">Alex Rivera</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text">Been using this for months now. Every game works perfectly, no sketchy links, no BS. Just quality gaming when I need it.</p><div class="review-date">1 week ago</div></div>
                    </div>
                    <div class="padlet-wrapper">
                        <div class="padlet-embed" style="border:1px solid rgba(0,0,0,0.1);border-radius:2px;box-sizing:border-box;overflow:hidden;position:relative;width:100%;background:#F4F4F4"><p style="padding:0;margin:0"><iframe src="https://padlet.com/embed/de91e4lqaz8j68w9" frameborder="0" allow="camera;microphone;geolocation;display-capture;clipboard-write" style="width:100%;height:608px;display:block;padding:0;margin:0"></iframe></p><div style="display:flex;align-items:center;justify-content:end;margin:0;padding:8px 8px 8px 0"><a href="https://padlet.com?ref=embed" style="display:flex;align-items:center;gap:5px;flex-grow:0;margin:0;border:none;padding:0;text-decoration:none" target="_blank"><span aria-hidden style="color:#9E9E9E;font-size:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;line-height:1">Made with</span><img src="https://padlet.net/emails/padlet_email_logo_2026_text-dark-200.png" height="12" style="padding:0;margin:0;background:0 0;border:none;box-shadow:none;display:block" alt="Made with Padlet"></a></div></div>
                    </div>
                    <div class="reviews-column">
                        <div class="review-card"><div class="review-header"><div class="review-avatar alt4">E</div><div class="review-info"><div class="review-name">Emma Williams</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text featured">You can really tell the creator curates this collection carefully. Unlike other sites that throw up hundreds of broken games, every single one here actually works and is worth playing. Quality over quantity done right.</p><div class="review-date">3 days ago</div></div>
                        <div class="review-card"><div class="review-header"><div class="review-avatar alt5">D</div><div class="review-info"><div class="review-name">David Kim</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text">Hollow Knight runs perfectly! The hero banner rotation is such a cool touch. Makes me want to try games I normally wouldn't.</p><div class="review-date">6 days ago</div></div>
                        <div class="review-card"><div class="review-header"><div class="review-avatar">L</div><div class="review-info"><div class="review-name">Luna Park</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text featured">The developer's attention to detail is insane. Every game is hand-picked, the site never lags, and the design is cleaner than most paid gaming platforms. This is what happens when someone actually cares about their work.</p><div class="review-date">1 week ago</div></div>
                        <div class="review-card"><div class="review-header"><div class="review-avatar alt1">T</div><div class="review-info"><div class="review-name">Tyler Brooks</div><div class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div></div></div><p class="review-text">My go-to site for breaks between classes. Fast, reliable, and actually fun to browse. The masonry layout makes finding new games super easy.</p><div class="review-date">2 weeks ago</div></div>
                    </div>
                </div>
            </div>
            <div class="footer">
                <div class="footer-logo">FLUXUS</div>
                <p>Your gateway to unblocked gaming</p>
            </div>
        </div>
    </div>

    <script>
        const changelogs = [
            { date: 'Feb 20, 2026', isNew: true, items: [{ text: 'Save system - click Save to download a .fluxsave file capturing your exact game state', type: 'added' },{ text: 'Load Save - load any .fluxsave file to restore a previous game session', type: 'added' },{ text: 'Storage spy injected into every game to monitor localStorage, sessionStorage, cookies and DOM changes in real time', type: 'added' },{ text: 'Save status indicator in the player bar shows UNSAVED, SAVING, and SAVE #N states', type: 'added' },{ text: 'Toast notifications for save/load feedback', type: 'added' },{ text: 'Redesigned game player - games now open in a sleek full-page overlay instead of a new tab', type: 'added' }] },
            { date: 'Feb 17, 2026', items: [{ text: 'Added HTML VIEWER - a sleek in-browser code editor with live preview', type: 'added' },{ text: 'HTML VIEWER supports fullscreen preview mode', type: 'added' },{ text: 'Draggable split pane between editor and preview', type: 'added' }] },
            { date: 'Feb 14, 2026', items: [{ text: 'Redesigned hero banner with brighter, more engaging visuals', type: 'added' },{ text: 'Implemented masonry grid layout for better game browsing', type: 'added' },{ text: 'Enhanced animations and seamless transitions', type: 'fixed' }] },
            { date: 'Feb 13, 2026', items: [{ text: 'Added sleek changelog feature', type: 'added' },{ text: 'Improved version picker animations', type: 'fixed' },{ text: 'Added secret games system', type: 'added' }] },
            { date: 'Feb 12, 2026', items: [{ text: 'Dynamic hero background with smooth transitions', type: 'added' },{ text: 'Profile selection animation improvements', type: 'fixed' },{ text: 'Fixed Minecraft versions', type: 'fixed' }] },
            { date: 'Feb 10, 2026', items: [{ text: 'Black and white theme redesign', type: 'added' },{ text: 'Removed category sections for cleaner layout', type: 'removed' },{ text: 'Bento grid layout implementation', type: 'added' }] }
        ];

        const secretGames = [
            { title: 'Five Nights At Epsteins', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/fnae/images.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/fnae/gncrack.html', searchTrigger: 'roblox', description: 'A forbidden horror game that only the brave can find.', hidden: true },
            { title: 'Secret Test Game', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/logo_Balatro.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Balatro', searchTrigger: 'konami', description: 'A secret game that only appears when you know the code.', hidden: true },
            { title: 'Hidden Gem', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/ULTRAKILL/MV5BNGIyZDE4OTYtNjBhOS00NzFkLTkyYWMtYzAzNWUxZThmMDBlXkEyXkFqcGc%40._V1_.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/ULTRAKILL/ULTRAKILL.txt', searchTrigger: 'secret', description: 'Another hidden treasure waiting to be discovered.', hidden: true }
        ];

        const games = [
            { title: 'Minecraft', image: 'https://github.com/ZephrECS/EagerIGG1.12.html/blob/main/MC.jpg?raw=true', category: 'featured', tag: 'POPULAR', description: 'Build, explore, and survive in an infinite blocky world. Mine resources, craft tools, and create anything you can imagine.', versions: [{ name: 'Minecraft 1.5.2', description: 'Runs better than other versions.', gameUrl: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/EaglercraftMODDED/cleaglercraft152.html' },{ name: 'Minecraft 1.8.8', description: 'Classic PvP version with great performance', gameUrl: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/EaglercraftMODDED/1.9eag.txt' }] },
            { title: 'ULTRAKILL', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/ULTRAKILL/MV5BNGIyZDE4OTYtNjBhOS00NzFkLTkyYWMtYzAzNWUxZThmMDBlXkEyXkFqcGc%40._V1_.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/ULTRAKILL/ULTRAKILL.txt', category: 'featured', tag: 'NEW', description: 'A fast-paced ultraviolent retro FPS. Descend through the layers of Hell in this stylish tribute to classic shooters.' },
            { title: 'Kindergarten', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Kindergarten/1b0bbb08482332e69ac7f7c6d1e262dc590d3df2f351f139f80dcb622d99493e.avif', category: 'featured', tag: 'POPULAR', description: "A dark comedy adventure game set in a twisted kindergarten. Solve puzzles, complete missions, and uncover the school's dark secrets.", versions: [{ name: 'Kindergarten 1', description: 'The original twisted school adventure', gameUrl: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Kindergarten/Kindergarten.txt' },{ name: 'Kindergarten 2', description: 'Continue the dark comedy with new missions', gameUrl: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Kindergarten/Kindergarten%202.html' },{ name: 'Kindergarten 3', description: 'Continue the dark comedy with new missions', gameUrl: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Kindergarten/Kindergarten%203.html' }] },
            { title: 'Balatro', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/logo_Balatro.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Balatro', category: 'featured', tag: 'TRENDING', description: 'A poker-inspired roguelike deck builder. Build ridiculous synergies and beat the blinds in this addictive card game.' },
            { title: 'Hollow Knight', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/HollowKnight/MV5BMGIyYmJmZDgtOWQ1Ny00NDFiLTk2OTgtM2Q2ZWQ4OWIxZjg3XkEyXkFqcGc%40._V1_FMjpg_UX1000_.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/HollowKnight/HollowGME.txt', category: 'featured', tag: 'TOP 10', description: 'Explore a vast ruined kingdom of insects and heroes. Discover ancient secrets and battle tainted creatures in this challenging metroidvania.' },
            { title: 'Buckshot Roulette', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Buckshot%20Roulette/logo_Buckshot_Roulette.png', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Buckshot%20Roulette/Buckshot%20Roulette.txt', category: 'action', description: 'A twisted game of chance with a shotgun. Make life-or-death decisions in this intense Russian roulette thriller.' },
            { title: 'People Playground', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/PPG/4bb51ff19e082e45d9187564ea12f3c01d520c683db7da74b10a89efd254ee7c.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/PPG/People%20Playground.txt', category: 'action', description: 'A ragdoll physics sandbox. Experiment with various weapons, tools, and environments in creative and destructive ways.' },
            { title: 'Hotline Miami', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/MV5BOWRlM2RkMjktYWQzMi00YmIxLTkyMWUtOTI0ZWRmODE1N2U5XkEyXkFqcGc%40._V1_FMjpg_UX1000_.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Hotline%20Miami/Hotline%20Miami.html', category: 'action', description: 'A brutal top-down action game set in 1989 Miami. Clear rooms of enemies in this neon-soaked ultraviolent rampage.' },
            { title: 'Half-Life', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/HalfLife/halflife_coverart.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/HalfLife/Half%20Life.txt', category: 'action', description: 'A revolutionary FPS that changed gaming forever. Fight through Black Mesa as Gordon Freeman in this legendary adventure.' },
            { title: 'Vice City', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Vice-City/Vice-city-cover.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Vice-City/ViceCity.html', category: 'action', description: 'Return to the 1980s in this crime-filled open world. Build your empire in the neon paradise of Vice City.' },
            { title: 'COD: Zombies', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/NZ%3AP%20HTML/TIARP5371__87728.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/NZ%3AP%20HTML/NZP.txt', category: 'action', description: 'Survive endless waves of the undead. Team up and fight off zombies in this classic arcade shooter experience.' },
            { title: 'Bow Masters', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/BowMasters/81H-w-fHMWL.png', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/BowMasters/28.html', category: 'action', description: 'Master the art of archery in ragdoll combat. Aim, shoot, and watch the hilarious physics-based carnage unfold.' },
            { title: 'Subway Surfers', image: 'https://raw.githubusercontent.com/SchoolHacksRUs/madboxlearningv3/refs/heads/main/video-game-Subway-Surfers-Poster-diamond-by-numbers.jpg', url: 'https://raw.githubusercontent.com/s0lace-games/s0lace/refs/heads/main/public/games/subway-surfers/index.html', category: 'action', description: 'Endless runner through city subways. Dodge trains, grind rails, and outrun the inspector in this colorful chase.' },
            { title: 'Iron Lung', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Iron%20Lung/MV5BM2JhZDRmNDAtZWE4OC00NmRjLTlmZGUtZmQxNmNkOTk5ZWRhXkEyXkFqcGc%40._V1_FMjpg_UX1000_.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Iron%20Lung/Iron%20Lung.html', category: 'horror', description: 'Navigate a submarine through an ocean of blood. A claustrophobic horror experience in complete darkness.' },
            { title: 'TattleTail', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Tattletail/tattletail-646521.7.webp', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Tattletail/Tattletail.txt', category: 'horror', description: 'Keep your new toy quiet before Mom finds out. A short survival horror about a very annoying talking toy.' },
            { title: 'FTF: Home Alone', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/MV5BNGZjOTBlYTctODcxNy00YTM1LTg2YTYtZTI3NzBmMDA4ZmJmXkEyXkFqcGc%40._V1_FMjpg_UX1000_.jpg', url: 'https://raw.githubusercontent.com/genizy/web-port/refs/heads/main/fears-to-fathom/home-alone/index.html', category: 'horror', description: 'Home alone on a stormy night. Investigate strange occurrences in this psychological horror experience.' },
            { title: 'Granny', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Granny/images.jpeg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Granny/Granny.txt', category: 'horror', description: "Escape from Granny's house before it's too late. Stay quiet, hide, and solve puzzles to survive five terrifying nights." },
            { title: 'Bendy: ATIM', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Bendy/images%20(1).jpeg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Bendy/Bendy%20and%20the%20Ink%20Machine%20(1).html', category: 'horror', description: 'Return to an abandoned animation studio. Uncover dark secrets and survive encounters with ink creatures.' },
            { title: 'Thats Not My Neighbor', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Your%20Not%20My%20Neighbor/images%20(2).jpeg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/tnmn.html', category: 'horror', description: 'Work as a doorman in 1955. Identify doppelgangers trying to enter the building in this tense horror job simulator.' },
            { title: 'Deadseat', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Deadseat/images_upscaled.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Deadseat/The%20Deadseat.html', category: 'horror', description: 'Answer calls in a mysterious taxi dispatch. Face supernatural events in this chilling late-night horror game.' },
            { title: 'A Bite At Freddys', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/A%20Bite%20At%20Freddies/New%20Project%20(1).png', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/A%20Bite%20At%20Freddies/ABAF.html', category: 'horror', description: 'Survive the night at a haunted pizzeria. Monitor cameras and manage power as animatronics hunt you down.' },
            { title: 'Midnight Shift', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Midnight%20Shift/RLDGy%2B.png', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Midnight%20Shift/midnight_shift.html', category: 'horror', description: "Work the graveyard shift at a gas station. Something's not right in this unsettling atmospheric horror." },
            { title: 'R.E.P.O.', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/R.E.P.O./repo-teases-big-update-game-rant.avif', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/R.E.P.O./R.E.P.O.txt', category: 'sandbox', description: 'Genetic disaster survival simulator. Build, craft, and adapt in a world filled with horrifying mutations.' },
            { title: 'Slime Rancher', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Slime%20Rancher/w5OuzDEu6HNzT2K4e5HRI7vJ.avif', url: 'http://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Slime%20Rancher/Slime%20Rancher.txt', category: 'sandbox', description: 'Become a slime rancher on an alien planet. Collect, raise, and farm adorable bouncing slimes for profit.' },
            { title: 'Sandboxels', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Sandboxels/Site-logo.webp', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Sandboxels/clsandboxels.html', category: 'sandbox', description: 'A pixel physics sandbox simulation. Experiment with hundreds of elements and watch them interact in creative ways.' },
            { title: 'Webfishing', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Webfishing/images%20(3).jpeg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Webfishing/WebFishing%20(1).html', category: 'sandbox', description: 'Chill fishing with friends online. Cast your line, catch fish, and hang out in this relaxing multiplayer experience.' },
            { title: 'Getting Over It', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Getting%20Over%20It%20With%20Bennet%20Foddy/9AZHswQrJ6UuZld22c5UGLuk5mqDWAocm0gUhDd6MyA.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Getting%20Over%20It%20With%20Bennet%20Foddy/GOIWBF.txt', category: 'classic', description: 'Climb a mountain with only a hammer. A punishing climbing game that will test your patience and skill.' },
            { title: 'Undertale', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Undertale/MV5BMWI3ZTkxZjktYWU3NC00OGQ1LWFlNzgtYzIwMWI4NDg2YTU0XkEyXkFqcGc%40._V1_FMjpg_UX1000_.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/undertale.html', category: 'classic', description: 'A unique RPG where nobody has to die. Make friends with monsters in this heartfelt indie masterpiece.' },
            { title: 'Deltarune', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/deltrarune/deltarune.webp', url: 'https://raw.githubusercontent.com/aukak/fyinx/refs/heads/main/g/deltarune/index.html', category: 'classic', description: 'The spiritual successor to Undertale. Experience a new world of choices, friendship, and mysterious dark powers.' },
            { title: 'Get Yoked', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/GetYoked/New%20Project%20(3).jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/GetYoked/Get%20Yoked.html', category: 'classic', description: 'Build your muscles to absurd proportions. A ridiculous fitness clicker game where bigger is always better.' },
            { title: 'Gladdi-Hoppers', image: 'https://raw.githubusercontent.com/SchoolHacksRUs/madboxlearningv3/refs/heads/main/Gladdihoppers/images.jpeg', url: 'https://raw.githubusercontent.com/SchoolHacksRUs/madboxlearningv3/refs/heads/main/Gladdihoppers/gladdihoppers.html', category: 'classic', description: 'Ragdoll gladiator physics battles. Fight in the arena with hilariously floppy warriors in chaotic combat.' },
            { title: 'Side Effects', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/SideEffects/side-effects-button-1759512691005.webp', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/SideEffects/MonkeyMayhen.txt', category: 'classic', description: 'Manage bizarre pharmaceutical side effects. A darkly comedic game about the absurdity of modern medicine.' },
            { title: 'Untitled Goose Game', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/e3549b645ea3dc77411280ba4a83f018235bbdb6f0b32039a5519cee985f0f4f.avif', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/Untitled%20Goose%20Game.txt', category: 'classic', description: "There's a Goose, There's a game." },
            { title: 'Clover Pit', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/CloverPit/CloverPit_cover.jpeg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/CloverPit/Clover%20Pit.html', category: 'classic', description: 'Gamble. Gamble. Gamble. Gamble.' },
            { title: "Andy's Apple Farm", image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/AndysAppleFarm/ne3tan.webp', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/AndysAppleFarm/applefarm.html', category: 'classic', description: 'Just farming some apples, wait a second..' },
            { title: 'Shift At Midnight', image: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Shift%20At%20Midnight/coa2v6.jpg', url: 'https://raw.githubusercontent.com/ZephrECS/WeirdLT22023/refs/heads/main/madbox-learning/Shift%20At%20Midnight/clshiftatmidnight.html', category: 'classic', description: 'Parasites.. LURKING as Humans.' }
        ];

        // --- LOADING SCREEN ---
        window.addEventListener('load', () => { setTimeout(() => { document.getElementById('loadingScreen').classList.add('hidden'); }, 2000); });

        // --- PROFILE ---
        const fluxusProfile = document.getElementById('fluxusProfile');
        const profileScreen = document.getElementById('profileScreen');
        const mainApp = document.getElementById('mainApp');
        const profileIcon = document.getElementById('profileIcon');

        fluxusProfile.addEventListener('click', function() {
            profileScreen.classList.add('animating');
            const avatar = this.querySelector('.profile-avatar');
            const letterF = this.querySelector('.letter-f');
            const profileName = this.querySelector('.profile-name');
            const profileHeader = document.querySelector('.profile-header');
            profileName.classList.add('fade-name');
            profileHeader.classList.add('fade-header');
            avatar.classList.add('zoom-animation');
            letterF.classList.add('grow-animation');
            setTimeout(() => { profileScreen.classList.add('fade-out'); }, 1000);
            setTimeout(() => {
                profileScreen.style.display = 'none';
                mainApp.classList.add('active');
                profileIcon.textContent = 'F';
                profileIcon.style.fontSize = '20px';
                profileIcon.style.fontWeight = '900';
                renderGames();
                startHeroRotation();
            }, 1200);
        });

        profileIcon.addEventListener('click', () => {
            document.body.classList.add('flashing');
            setTimeout(() => { document.body.classList.remove('flashing'); }, 600);
        });

        // --- CHANGELOG ---
        function showChangelog() {
            const modal = document.createElement('div');
            modal.className = 'changelog-modal';
            const changelogHTML = changelogs.map(entry => `<div class="changelog-entry ${entry.isNew ? 'new' : ''}"><div class="changelog-date">${entry.date}${entry.isNew ? ' &bull; NEW' : ''}</div><div class="changelog-items">${entry.items.map(item => `<div class="changelog-item ${item.type}">${item.text}</div>`).join('')}</div></div>`).join('');
            modal.innerHTML = `<div class="changelog-content"><div class="changelog-header"><h2 class="changelog-title">&#127918; What's New</h2><button class="changelog-close">&#10005;</button></div><div class="changelog-list">${changelogHTML}</div></div>`;
            function closeModal() { modal.classList.add('closing'); setTimeout(() => modal.remove(), 300); }
            modal.querySelector('.changelog-close').addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            document.body.appendChild(modal);
        }
        document.getElementById('changelogBtn').addEventListener('click', showChangelog);

        // --- HERO ROTATION ---
        let currentHeroIndex = 0;
        let heroInterval;

        function startHeroRotation() {
            updateHero();
            heroInterval = setInterval(() => { currentHeroIndex = (currentHeroIndex + 1) % games.length; updateHero(); }, 8000);
        }

        function updateHero() {
            const game = games[currentHeroIndex];
            const heroBackground = document.getElementById('heroBackground');
            const heroImage = document.getElementById('heroImage');
            const heroBadge = document.getElementById('heroBadge');
            const heroTitle = document.getElementById('heroTitle');
            const heroDescription = document.getElementById('heroDescription');
            const heroButtons = document.querySelector('.hero-buttons');
            heroBadge.classList.remove('visible'); heroTitle.classList.remove('visible'); heroDescription.classList.remove('visible'); heroButtons.classList.remove('visible'); heroBackground.classList.remove('active');
            setTimeout(() => {
                heroImage.src = game.image;
                heroBadge.textContent = game.tag || 'Featured Game';
                heroTitle.textContent = game.title;
                heroDescription.textContent = game.description || 'Experience this amazing game now.';
                heroBackground.classList.add('active');
                setTimeout(() => heroBadge.classList.add('visible'), 100);
                setTimeout(() => heroTitle.classList.add('visible'), 200);
                setTimeout(() => heroDescription.classList.add('visible'), 300);
                setTimeout(() => heroButtons.classList.add('visible'), 400);
            }, 600);
        }

        // --- RENDER GAMES ---
        function renderGames() {
            const container = document.getElementById('allGamesGrid');
            const regularGamesHTML = games.map(game => `<div class="bento-item" data-category="${game.category}" onclick="${game.versions ? `showVersionPicker(${games.indexOf(game)}, false)` : `playGame('${game.url}', '${game.title}')`}"><img src="${game.image}" class="bento-image" alt="${game.title}" onload="setGridRowSpan(this)"><div class="bento-overlay"><div class="bento-title">${game.title}</div>${game.tag ? `<span class="bento-tag">${game.tag}</span>` : ''}</div></div>`).join('');
            const secretGamesHTML = secretGames.map(game => `<div class="bento-item secret-game" style="display:none;" onclick="${game.versions ? `showVersionPicker(${secretGames.indexOf(game)}, true)` : `playGame('${game.url}', '${game.title}')`}"><img src="${game.image}" class="bento-image" alt="${game.title}" onload="setGridRowSpan(this)"><div class="bento-overlay"><div class="bento-title">${game.title}</div><span class="bento-tag">SECRET</span></div></div>`).join('');
            container.innerHTML = regularGamesHTML + secretGamesHTML;
            updateCategoryCounts();
            setupCategoryFilters();
        }

        function setGridRowSpan(img) {
            const item = img.closest('.bento-item');
            const rowHeight = 10; const rowGap = 10;
            const height = img.getBoundingClientRect().height;
            const rowSpan = Math.ceil((height + rowGap) / (rowHeight + rowGap));
            item.style.gridRowEnd = `span ${rowSpan}`;
        }

        function updateCategoryCounts() {
            ['all','featured','action','horror','sandbox','classic'].forEach(cat => {
                const count = cat === 'all' ? games.length : games.filter(g => g.category === cat).length;
                const el = document.getElementById(`count-${cat}`);
                if (el) el.textContent = count;
            });
        }

        function setupCategoryFilters() {
            const categoryItems = document.querySelectorAll('.category-item');
            categoryItems.forEach(item => {
                item.addEventListener('click', function() {
                    categoryItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    filterByCategory(this.dataset.category);
                });
            });
        }

        function filterByCategory(category) {
            const allItems = document.querySelectorAll('.bento-item:not(.secret-game)');
            allItems.forEach(item => item.classList.add('transitioning'));
            allItems.forEach(item => {
                const shouldShow = category === 'all' || item.dataset.category === category;
                if (shouldShow) { item.classList.remove('fade-out'); item.style.gridColumn = 'span 1'; item.style.visibility = 'visible'; item.style.position = 'relative'; }
                else { item.classList.add('fade-out'); setTimeout(() => { if (item.classList.contains('fade-out')) { item.style.gridColumn = 'span 0'; item.style.visibility = 'hidden'; item.style.position = 'absolute'; } }, 400); }
            });
            setTimeout(() => { allItems.forEach(item => item.classList.remove('transitioning')); }, 700);
        }

        function showVersionPicker(gameIndex, isSecret = false) {
            const game = isSecret ? secretGames[gameIndex] : games[gameIndex];
            if (!game.versions) return;
            const modal = document.createElement('div');
            modal.className = 'version-modal';
            modal.innerHTML = `<div class="version-content"><h2 class="version-header">&#127918; Select Version</h2><p class="version-subtitle">Choose which version of ${game.title} you'd like to play</p><div class="version-grid">${game.versions.map(v => `<div class="version-option" data-url="${v.gameUrl}" data-title="${game.title} - ${v.name}"><div class="version-name">${v.name}</div><div class="version-description">${v.description}</div></div>`).join('')}</div><button class="version-close">Cancel</button></div>`;
            function closeModal() { modal.classList.add('closing'); setTimeout(() => modal.remove(), 300); }
            modal.querySelectorAll('.version-option').forEach(option => {
                option.addEventListener('click', function() {
                    const url = this.dataset.url;
                    const title = this.dataset.title;
                    closeModal();
                    setTimeout(() => playGame(url, title), 150);
                });
            });
            modal.querySelector('.version-close').addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            document.body.appendChild(modal);
        }

        // --- GAME PLAYER ---

        // SAVE APPROACH: localStorage-only.
        // Games like Undertale, Deltarune, Kindergarten etc. write saves to
        // localStorage automatically. We snapshot those keys, bundle into a
        // .fluxsave file. On load we inject a preloader script that writes
        // the keys back BEFORE any game JS runs - the game's own save system
        // finds everything exactly as it left it.
        // Games with no localStorage saves (WASM/Unity) get an honest message.

        function showToast(msg, type, duration) {
            type = type || 'success'; duration = duration || 3200;
            var old = document.getElementById('gpToast');
            if (old) old.remove();
            var t = document.createElement('div');
            t.id = 'gpToast';
            t.className = 'gp-toast ' + type;
            t.innerHTML = '<div class="gp-toast-dot"></div>' + msg;
            document.body.appendChild(t);
            requestAnimationFrame(function(){ requestAnimationFrame(function(){ t.classList.add('show'); }); });
            setTimeout(function(){ t.classList.remove('show'); setTimeout(function(){ t.remove(); }, 400); }, duration);
        }

        function readIframeLocalStorage(iframe) {
            try {
                var ls = iframe.contentWindow.localStorage;
                var out = {};
                for (var i = 0; i < ls.length; i++) {
                    var k = ls.key(i);
                    out[k] = ls.getItem(k);
                }
                return out;
            } catch(e) { return null; }
        }

        function injectPreloader(html, savedLS) {
            var b64data = btoa(unescape(encodeURIComponent(JSON.stringify(savedLS))));
            var body = '(function(){'
                + 'try{'
                + 'var d=JSON.parse(decodeURIComponent(escape(atob("' + b64data + '"))));'
                + 'Object.keys(d).forEach(function(k){try{localStorage.setItem(k,d[k]);}catch(ex){}});'
                + 'console.log("[FLUXUS] Restored "+Object.keys(d).length+" keys");'
                + '}catch(e){console.warn("[FLUXUS] Restore failed",e);}'
                + 'var el=document.getElementById("__fp__");'
                + 'if(el&&el.parentNode)el.parentNode.removeChild(el);'
                + '})();';
            var preloader = '<scr'+'ipt id="__fp__">'+body+'</scr'+'ipt>';
            if (html.indexOf('<head>') !== -1) return html.replace('<head>', '<head>' + preloader);
            if (/<head[\s>]/i.test(html)) return html.replace(/<head[^>]*>/i, function(m){ return m + preloader; });
            if (/<body[\s>]/i.test(html)) return html.replace(/<body[^>]*>/i, function(m){ return m + preloader; });
            return preloader + html;
        }

        async function playGame(url, title, saveData) {
            title = title || 'Game';
            try {
                var response = await fetch(url);
                var html = await response.text();
                if (saveData && saveData.localStorage && Object.keys(saveData.localStorage).length > 0) {
                    html = injectPreloader(html, saveData.localStorage);
                }
                var blob = new Blob([html], { type: 'text/html' });
                var blobUrl = URL.createObjectURL(blob);
                openGamePlayer(blobUrl, title, url);
            } catch(error) {
                alert('Error loading game. Please try again.');
                console.error(error);
            }
        }

        function openGamePlayer(src, title, originalUrl) {
            var overlay = document.createElement('div');
            overlay.className = 'game-player-overlay';
            overlay.innerHTML =
                '<div class="gp-bar">' +
                    '<div class="gp-left">' +
                        '<div class="gp-logo-mark">F</div>' +
                        '<div class="gp-divider"></div>' +
                        '<div class="gp-game-title">' + title + '</div>' +
                    '</div>' +
                    '<div class="gp-center"><div class="gp-loading-ring" id="gpLoadingRing"></div></div>' +
                    '<div class="gp-actions">' +
                        '<button class="gp-btn gp-btn-save" id="gpSave" title="Save game">' +
                            '<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>' +
                            '<span>Save</span>' +
                        '</button>' +
                        '<button class="gp-btn gp-btn-load" id="gpLoad" title="Load save file">' +
                            '<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>' +
                            '<span>Load Save</span>' +
                        '</button>' +
                        '<button class="gp-btn gp-btn-refresh" id="gpRefresh" title="Refresh">' +
                            '<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M23 4v6h-6"/><path d="M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>' +
                            '<span>Refresh</span>' +
                        '</button>' +
                        '<button class="gp-btn gp-btn-fullscreen" id="gpFullscreen" title="Fullscreen">' +
                            '<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>' +
                            '<span>Fullscreen</span>' +
                        '</button>' +
                        '<button class="gp-btn gp-btn-exit" id="gpExit" title="Exit">' +
                            '<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>' +
                            '<span>Exit</span>' +
                        '</button>' +
                    '</div>' +
                '</div>' +
                '<div class="gp-frame-wrap">' +
                    '<iframe class="gp-iframe" id="gpIframe" src="' + src + '" allowfullscreen allow="autoplay; fullscreen; pointer-lock; keyboard-map; clipboard-read; clipboard-write"></iframe>' +
                '</div>' +
                '<input type="file" id="gpFileInput" accept=".fluxsave" style="display:none;">';

            document.body.appendChild(overlay);

            var iframe = overlay.querySelector('#gpIframe');
            var loadingRing = overlay.querySelector('#gpLoadingRing');

            iframe.addEventListener('load', function(){ loadingRing.classList.add('hidden'); });

            // -- SAVE: read the iframe's localStorage and download as .fluxsave --
            overlay.querySelector('#gpSave').addEventListener('click', function() {
                var btn = this;
                btn.disabled = true;

                // Small delay to let game flush any pending writes
                setTimeout(function() {
                    var ls = readIframeLocalStorage(iframe);

                    if (ls === null) {
                        showToast('Cannot read game storage - WASM or cross-origin', 'error', 4000);
                        btn.disabled = false;
                        return;
                    }

                    var keyCount = Object.keys(ls).length;

                    if (keyCount === 0) {
                        showToast('No save data found - this game may not use localStorage saves', 'info', 4000);
                        btn.disabled = false;
                        return;
                    }

                    var saveObj = {
                        _fluxus: true,
                        version: 2,
                        game: title,
                        originalUrl: originalUrl,
                        savedAt: new Date().toISOString(),
                        localStorage: ls
                    };

                    var json = JSON.stringify(saveObj, null, 2);
                    var blob = new Blob([json], { type: 'application/json' });
                    var a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    var safeName = title.replace(/[^a-z0-9]/gi, '_').toLowerCase();
                    a.download = safeName + '_' + Date.now() + '.fluxsave';
                    a.click();
                    URL.revokeObjectURL(a.href);

                    showToast('Saved! ' + keyCount + (keyCount===1 ? ' key' : ' keys') + ' captured -> ' + a.download, 'success');
                    btn.disabled = false;
                }, 150);
            });

            // -- LOAD: pick a .fluxsave file, relaunch game with data injected --
            var fileInput = overlay.querySelector('#gpFileInput');
            overlay.querySelector('#gpLoad').addEventListener('click', function(){ fileInput.click(); });

            fileInput.addEventListener('change', async function(e) {
                var file = e.target.files[0];
                if (!file) return;
                fileInput.value = '';
                try {
                    var text = await file.text();
                    var data = JSON.parse(text);
                    if (!data._fluxus || !data.localStorage) {
                        showToast('Not a valid .fluxsave file', 'error');
                        return;
                    }
                    var keyCount = Object.keys(data.localStorage).length;
                    // Close this player and relaunch with the save data injected
                    closePlayer();
                    setTimeout(function() {
                        showToast('Loading save - restoring ' + keyCount + (keyCount===1 ? ' key' : ' keys') + '...', 'info', 2500);
                        playGame(data.originalUrl, data.game, data);
                    }, 300);
                } catch(err) {
                    showToast('Failed to read save file', 'error');
                    console.error(err);
                }
            });

            // Refresh
            overlay.querySelector('#gpRefresh').addEventListener('click', function() {
                loadingRing.classList.remove('hidden');
                iframe.src = iframe.src;
            });

            // Fullscreen
            overlay.querySelector('#gpFullscreen').addEventListener('click', function() {
                var frameWrap = overlay.querySelector('.gp-frame-wrap');
                if (document.fullscreenElement) { document.exitFullscreen(); }
                else { frameWrap.requestFullscreen().catch(function(){ if(iframe.requestFullscreen) iframe.requestFullscreen(); }); }
            });

            function closePlayer() {
                overlay.classList.add('closing');
                setTimeout(function(){ URL.revokeObjectURL(src); overlay.remove(); }, 250);
            }
            overlay.querySelector('#gpExit').addEventListener('click', closePlayer);

            function handleEsc(e) {
                if (e.key === 'Escape' && !document.fullscreenElement) {
                    document.removeEventListener('keydown', handleEsc);
                    closePlayer();
                }
            }
            document.addEventListener('keydown', handleEsc);
        }

        document.getElementById('playFeatured').addEventListener('click', () => {
            const game = games[currentHeroIndex % games.length];
            if (game.versions) showVersionPicker(currentHeroIndex % games.length, false);
            else playGame(game.url, game.title);
        });

        // --- SEARCH ---
        document.getElementById('searchBox').addEventListener('input', function(e) {
            const search = e.target.value.toLowerCase().trim();
            if (search) { const categoryItems = document.querySelectorAll('.category-item'); categoryItems.forEach(i => i.classList.remove('active')); document.querySelector('.category-item[data-category="all"]').classList.add('active'); }
            const allItems = document.querySelectorAll('.bento-item');
            allItems.forEach(item => {
                const title = item.querySelector('.bento-title')?.textContent.toLowerCase() || '';
                const isSecret = item.classList.contains('secret-game');
                if (search === '') { item.style.display = isSecret ? 'none' : 'inline-block'; }
                else if (isSecret) { const gameTitle = item.querySelector('.bento-title').textContent; const sg = secretGames.find(g => g.title === gameTitle); item.style.display = (sg && sg.searchTrigger.toLowerCase() === search) ? 'inline-block' : 'none'; }
                else { item.style.display = title.includes(search) ? 'inline-block' : 'none'; }
            });
        });

        // --- NAVBAR SCROLL ---
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 100) navbar.classList.add('scrolled');
            else navbar.classList.remove('scrolled');
        });

        // --- HTML VIEWER ---
        const DEFAULT_HTML = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <style>\n    body { margin:0; font-family:-apple-system,sans-serif; background:linear-gradient(135deg,#0f0f0f 0%,#1a1a2e 100%); color:#e0e0e0; display:flex; align-items:center; justify-content:center; min-height:100vh; text-align:center; }\n    h1 { font-size:3em; margin:0; letter-spacing:-2px; }\n    p { color:#888; margin-top:12px; }\n    .dot { color:#00ff88; }\n  </style>\n</head>\n<body>\n  <div>\n    <h1>Hello<span class="dot">.</span></h1>\n    <p>Edit the code on the left and press Run</p>\n  </div>\n</body>\n</html>`;
        let hvEditorContent = DEFAULT_HTML;
        let hvLineCount = 0;
        let hvModal = null;

        function openHtmlViewer() {
            hvModal = document.createElement('div');
            hvModal.className = 'html-viewer-modal';
            hvModal.innerHTML = `<div class="hv-container" id="hvContainer"><div class="hv-titlebar"><div class="hv-traffic-lights"><div class="hv-dot close" id="hvClose"></div><div class="hv-dot min"></div><div class="hv-dot max" id="hvFullscreenDot"></div></div><div class="hv-title"><span>&lt;</span> HTML VIEWER <span>/&gt;</span></div><div class="hv-actions"><button class="hv-btn hv-btn-clear" id="hvClearBtn">CLEAR</button><button class="hv-btn hv-btn-fullscreen" id="hvFsBtn"><svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg> FULLSCREEN</button><button class="hv-btn hv-btn-run" id="hvRunBtn">&#9654; RUN</button></div></div><div class="hv-body" id="hvBody"><div class="hv-editor-pane" id="hvEditorPane"><div class="hv-pane-header"><div class="hv-pane-dot"></div>EDITOR &mdash; index.html</div><div class="hv-editor-wrap"><div class="hv-line-numbers" id="hvLineNums"></div><textarea class="hv-code-editor" id="hvEditor" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="off"></textarea></div></div><div class="hv-resize-handle" id="hvResizeHandle"></div><div class="hv-preview-pane" id="hvPreviewPane"><div class="hv-pane-header"><div class="hv-pane-dot" style="background:#febc2e;"></div>PREVIEW</div><div class="hv-empty-state" id="hvEmptyState"><div class="hv-empty-icon">&#10092;/&#10093;</div><div>Press RUN to render your HTML</div></div><iframe class="hv-preview-frame" id="hvPreview" style="display:none;"></iframe></div></div><div class="hv-statusbar"><div class="hv-status-item green" id="hvStatusReady">&#9679; READY</div><div class="hv-status-item" id="hvStatusLines">0 LINES</div><div class="hv-status-item" id="hvStatusChars">0 CHARS</div><div class="hv-status-item" style="margin-left:auto;">HTML VIEWER v1.0</div></div></div>`;
            hvModal.addEventListener('click', (e) => { if (e.target === hvModal) closeHtmlViewer(); });
            document.body.appendChild(hvModal);
            const editor = document.getElementById('hvEditor');
            editor.value = hvEditorContent;
            updateLineNumbers(); updateStatusBar();
            editor.addEventListener('input', () => { hvEditorContent = editor.value; updateLineNumbers(); updateStatusBar(); });
            editor.addEventListener('scroll', () => { const lineNums = document.getElementById('hvLineNums'); lineNums.scrollTop = editor.scrollTop; });
            editor.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') { e.preventDefault(); const start = editor.selectionStart; const end = editor.selectionEnd; editor.value = editor.value.substring(0,start) + '  ' + editor.value.substring(end); editor.selectionStart = editor.selectionEnd = start + 2; hvEditorContent = editor.value; updateLineNumbers(); }
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') { e.preventDefault(); runHtml(); }
            });
            document.getElementById('hvRunBtn').addEventListener('click', runHtml);
            document.getElementById('hvClearBtn').addEventListener('click', () => { editor.value = ''; hvEditorContent = ''; updateLineNumbers(); updateStatusBar(); document.getElementById('hvPreview').style.display = 'none'; document.getElementById('hvEmptyState').style.display = 'flex'; });
            document.getElementById('hvClose').addEventListener('click', closeHtmlViewer);
            document.getElementById('hvFsBtn').addEventListener('click', openFullscreen);
            document.getElementById('hvFullscreenDot').addEventListener('click', openFullscreen);
            setupResizer();
            runHtml();
        }

        function updateLineNumbers() {
            const editor = document.getElementById('hvEditor'); if (!editor) return;
            const lineNums = document.getElementById('hvLineNums'); if (!lineNums) return;
            const lines = editor.value.split('\n').length;
            if (lines === hvLineCount) return;
            hvLineCount = lines;
            lineNums.innerHTML = Array.from({length: lines}, (_,i) => `<span class="hv-line-num">${i+1}</span>`).join('');
        }

        function updateStatusBar() {
            const editor = document.getElementById('hvEditor'); if (!editor) return;
            const lines = editor.value.split('\n').length; const chars = editor.value.length;
            const linesEl = document.getElementById('hvStatusLines'); const charsEl = document.getElementById('hvStatusChars');
            if (linesEl) linesEl.textContent = `${lines} LINES`; if (charsEl) charsEl.textContent = `${chars} CHARS`;
        }

        function runHtml() {
            const editor = document.getElementById('hvEditor'); const preview = document.getElementById('hvPreview'); const emptyState = document.getElementById('hvEmptyState'); const statusReady = document.getElementById('hvStatusReady');
            if (!editor || !preview) return;
            const html = editor.value; if (!html.trim()) return;
            emptyState.style.display = 'none'; preview.style.display = 'block';
            const blob = new Blob([html], {type:'text/html'}); preview.src = URL.createObjectURL(blob);
            const runBtn = document.getElementById('hvRunBtn');
            if (runBtn) { runBtn.textContent = '&#10003; DONE'; runBtn.style.background = '#00cc66'; setTimeout(() => { runBtn.textContent = '&#9654; RUN'; runBtn.style.background = ''; }, 1200); }
            if (statusReady) { statusReady.textContent = '&#9679; RUNNING'; statusReady.style.color = '#febc2e'; setTimeout(() => { statusReady.textContent = '&#9679; READY'; statusReady.style.color = '#00ff88'; }, 1000); }
        }

        function closeHtmlViewer() { if (!hvModal) return; hvModal.classList.add('closing'); setTimeout(() => { hvModal.remove(); hvModal = null; }, 250); }

        function openFullscreen() {
            const editor = document.getElementById('hvEditor'); if (!editor) return;
            const html = editor.value; if (!html.trim()) return;
            const overlay = document.createElement('div'); overlay.className = 'hv-fullscreen-overlay';
            overlay.innerHTML = `<div class="hv-fs-bar"><div class="hv-fs-title">&#10092;/&#10093; HTML VIEWER &mdash; FULLSCREEN PREVIEW</div><button class="hv-fs-exit" id="hvFsExit">&#10005; EXIT FULLSCREEN</button></div><iframe class="hv-fs-frame" id="hvFsFrame"></iframe>`;
            document.body.appendChild(overlay);
            const frame = document.getElementById('hvFsFrame'); const blob = new Blob([html], {type:'text/html'}); frame.src = URL.createObjectURL(blob);
            document.getElementById('hvFsExit').addEventListener('click', () => { overlay.style.opacity = '0'; overlay.style.transition = 'opacity 0.2s'; setTimeout(() => overlay.remove(), 200); });
        }

        function setupResizer() {
            const handle = document.getElementById('hvResizeHandle'); const editorPane = document.getElementById('hvEditorPane'); const body = document.getElementById('hvBody');
            if (!handle || !editorPane || !body) return;
            let isResizing = false; let startX = 0; let startWidth = 0;
            handle.addEventListener('mousedown', (e) => { isResizing = true; startX = e.clientX; startWidth = editorPane.offsetWidth; handle.classList.add('dragging'); document.body.style.cursor = 'col-resize'; document.body.style.userSelect = 'none'; });
            document.addEventListener('mousemove', (e) => { if (!isResizing) return; const delta = e.clientX - startX; const totalWidth = body.offsetWidth; const newWidth = Math.max(240, Math.min(totalWidth - 240, startWidth + delta)); editorPane.style.width = newWidth + 'px'; editorPane.style.flex = 'none'; });
            document.addEventListener('mouseup', () => { if (!isResizing) return; isResizing = false; handle.classList.remove('dragging'); document.body.style.cursor = ''; document.body.style.userSelect = ''; });
        }

        document.getElementById('htmlViewerBtn').addEventListener('click', openHtmlViewer);
    </script>
</body>
</html>
